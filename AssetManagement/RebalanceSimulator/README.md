# ポートフォリオ・リバランス・シミュレーター

このPythonスクリプトは、異なるリバランス戦略を用いた投資ポートフォリオのパフォーマンスを、過去のデータを使用してシミュレーションし比較します。定期的なリバランスと閾値リバランスがポートフォリオのパフォーマンスに与える影響を分析することができます。

## 特徴

- 3種類のポートフォリオ戦略をシミュレーション：
  - 定期的リバランス
  - 閾値リバランス
  - リバランスなし
- yfinanceライブラリを使用して過去の価格データを取得
- 以下の主要なパフォーマンス指標を計算：
  - 総収益率
  - 年間収益率
  - シャープレシオ
  - 最大ドローダウン
- matplotlibを使用してポートフォリオのパフォーマンスを可視化

## 要件

- Python 3.6以上
- 必要なPythonパッケージ：
  - yfinance
  - pandas
  - numpy
  - matplotlib

必要なパッケージは以下のコマンドでインストールできます：

```
pip install yfinance pandas numpy matplotlib
```

## 使用方法

1. `rebalance_simulator.py`ファイルを開き、必要に応じてシミュレーションパラメータを調整します：
   - `initial_balance`: ポートフォリオの初期残高
   - `target_allocations`: 資産とその目標配分比率の辞書
   - `start_date`と`end_date`: シミュレーションの日付範囲
   - `periodic_rebalance_frequency`: 定期リバランスの間隔（取引日数）
   - `threshold`: 閾値リバランスのトリガーとなる乖離率
   - `risk_free_rate`: シャープレシオ計算用の年間リスクフリーレート

2. コマンドプロンプトからプログラムを実行します。
   ```bash
   python rebalance_simulator.py
   ```

## 出力例

```
期間: 2020-01-01 から 2023-12-31
初期投資額: $10,000
リスクフリーレート: 1.00%

定期リバランス:
最終ポートフォリオ価値: $14,567.89
総収益率: 45.68%
年間収益率: 11.23%
シャープレシオ: 0.87
最大ドローダウン: 15.34%
リバランス回数: 15

閾値リバランス:
最終ポートフォリオ価値: $14,789.12
総収益率: 47.89%
年間収益率: 11.67%
シャープレシオ: 0.89
最大ドローダウン: 14.56%
リバランス回数: 8

リバランスなし:
最終ポートフォリオ価値: $14,123.45
総収益率: 41.23%
年間収益率: 10.34%
シャープレシオ: 0.82
最大ドローダウン: 17.56%
```

スクリプトは、3つのリバランス戦略のパフォーマンス比較を示すグラフも生成します。

## カスタマイズ

スクリプトは簡単に以下のようにカスタマイズできます：
- ポートフォリオの資産を変更
- リバランスの頻度や閾値を調整
- シミュレーションの日付範囲を変更

## 免責事項

このスクリプトは情報提供の目的でのみ作成されています。金融アドバイスを構成するものではありません。過去のパフォーマンスは将来の結果を保証するものではありません。

## ライセンス

このプロジェクトはオープンソースで、MITライセンスの下で利用可能です。