# ポートフォリオ・リバランス・シミュレーター

このPythonスクリプトは、投資ポートフォリオのリバランス戦略を比較・分析するためのツールです。複数のリバランス方法（定期的リバランス、閾値リバランス、リバランスなし）のパフォーマンスを比較し、過去のデータを基にシミュレーションを行います。

## 特徴

- yfinanceライブラリを使用して過去の価格データを取得
- ユーザー入力によるポートフォリオ構成とシミュレーションパラメータの設定
- 複数のETFを含むポートフォリオのシミュレーションが可能
- 3つのリバランス戦略のシミュレーション：
  - 定期的リバランス
  - 閾値リバランス
  - リバランスなし
- 以下の主要なパフォーマンス指標を計算：
  - 総収益率
  - 年間収益率
  - シャープレシオ
  - 最大ドローダウン
- matplotlibを使用してシミュレーション結果を可視化

## 要件

- Python 3.7以上
- 必要なPythonパッケージ：
  - yfinance
  - pandas
  - numpy
  - matplotlib

必要なパッケージは以下のコマンドでインストールできます：

```
pip install yfinance pandas numpy matplotlib
```

## 使用方法

1. コマンドプロンプトからプログラムを実行します。
   ```bash
   python rebalance_simulator.py
   ```

2. プロンプトに従って、以下の情報を入力します：
   - 初期投資額（ドル）
   - ポートフォリオの構成（ETFのティッカーシンボルと配分比率）
   - シミュレーションの開始日と終了日
   - 年間リスクフリーレート
   - 定期リバランスの頻度（営業日数）
   - 閾値リバランスの閾値

3. プログラムが自動的にデータを取得し、シミュレーションを実行します。

4. 結果が表示され、グラフが生成されます。

## 出力例

```
期間: 2020-01-01 から 2023-12-31
初期投資額: $10,000.00
ポートフォリオ構成:
  VT: 80.00%
  EDV: 20.00%
リスクフリーレート: 1.00%

定期リバランス:
最終ポートフォリオ価値: $15,234.56
総収益率: 52.35%
年間収益率: 11.12%
シャープレシオ: 0.87
最大ドローダウン: 25.67%
リバランス回数: 16

閾値リバランス:
最終ポートフォリオ価値: $15,345.67
総収益率: 53.46%
年間収益率: 11.32%
シャープレシオ: 0.89
最大ドローダウン: 24.98%
リバランス回数: 8

リバランスなし:
最終ポートフォリオ価値: $15,123.45
総収益率: 51.23%
年間収益率: 10.93%
シャープレシオ: 0.85
最大ドローダウン: 26.54%
```

スクリプトは、3つのリバランス戦略のポートフォリオ価値推移を比較するグラフも生成します。

## カスタマイズ

このスクリプトは、実行時にユーザー入力を受け付けるため、以下の項目を簡単にカスタマイズできます：
- ポートフォリオの資産構成（複数のETFを選択可能）
- シミュレーション期間
- 初期投資額
- リスクフリーレート
- 定期リバランスの頻度
- 閾値リバランスの閾値

## 注意点

- ポートフォリオの配分比率の合計が1（100%）になるまでティッカーシンボルと比率の入力を続けます。
- 合計が1を超えた場合、入力は自動的に終了し、比率は正規化されます。
- グラフの表示は英語で行われますが、その他の結果表示は日本語で行われます。

## 免責事項

このスクリプトは情報提供の目的でのみ作成されています。金融アドバイスを構成するものではありません。シミュレーション結果は将来の実際のパフォーマンスを保証するものではありません。投資判断を行う前に、専門家のアドバイスを受けることをお勧めします。